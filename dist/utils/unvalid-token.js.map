{"version":3,"sources":["utils/unvalid-token.js"],"names":[],"mappings":";;;;;;;;;;;AAcA;;;;;;gEAKO,iBAAwB,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACG,OAAO,QAAP,CAAgB,KAAhB,EAAuB,CAAvB,CADH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAe,Q;;;;;AAItB;;;;;;;;iEAKO,kBAAwB,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACG,OAAO,QAAP,CAAgB,KAAhB,CADH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAe,Q;;;;;AAItB;;;;;;;;;;iEAOO,kBAAuB,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAEsB,OAAO,QAAP,CAAgB,KAAhB,CAFtB;;AAAA;AAEO,8BAFP;;AAAA,6BAGK,MAHL;AAAA;AAAA;AAAA;;AAAA,0DAIY,IAJZ;;AAAA;AAAA,0DAMY,KANZ;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,0DASQ,IATR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAe,O;;;;;AAjCtB;;;;AAEA;;;;;;AAEA,IAAM,SAAS,gBAAM,YAAN,CAAmB,iBAAO,YAA1B,CAAf,C,CAVA;;;;;;AAYA,mBAAS,YAAT,CAAsB,gBAAM,WAAN,CAAkB,SAAxC","file":"utils/unvalid-token.js","sourcesContent":["/**\n * unvalid token\n *\n * Created by Bell on 16/8/12.\n */\n\nimport redis from 'redis';\nimport bluebird from 'bluebird';\nimport config from '../config';\n\nconst client = redis.createClient(config.redisOptions);\n\nbluebird.promisifyAll(redis.RedisClient.prototype);\n\n/**\n * add unvalid token to redis\n *\n * @param token\n */\nexport async function addToken(token) {\n    await client.setAsync(token, 1);\n}\n\n/**\n * delete unvalid token from redis\n *\n * @param token\n */\nexport async function delToken(token) {\n    await client.delAsync(token);\n}\n\n/**\n * whether unvalid token is existed in redis\n * if true,the token is unvalid\n *\n * @param token\n * @returns {boolean}\n */\nexport async function existed(token) {\n    try {\n        const result = await client.getAsync(token);\n        if (result) {\n            return true;\n        } else {\n            return false;\n        }\n    } catch (err) {\n        return true;\n    }\n}\n"],"sourceRoot":"/source/"}