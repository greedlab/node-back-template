{"version":3,"sources":["utils/token.js"],"names":[],"mappings":";;;;;;;;;;;AAYA;;;;;;gEAKO,iBAAyB,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACG,OAAO,QAAP,CAAgB,KAAhB,EAAuB,CAAvB,CADH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAe,S;;;;;AAItB;;;;;;;;iEAKO,kBAAwB,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACG,OAAO,QAAP,CAAgB,KAAhB,CADH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAe,Q;;;;;AAItB;;;;;;;;;iEAMO,kBAA8B,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAEsB,OAAO,QAAP,CAAgB,KAAhB,CAFtB;;AAAA;AAEO,8BAFP;;AAAA,6BAGK,MAHL;AAAA;AAAA;AAAA;;AAAA,0DAIY,IAJZ;;AAAA;AAAA,0DAMY,KANZ;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AASC,gCAAQ,KAAR;AATD,0DAUQ,KAVR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAe,c;;;;;AA9BtB;;;;;;AANA;;;;;;AAQA,IAAM,SAAS,gBAAM,YAAN,EAAf;;AAEA,mBAAS,YAAT,CAAsB,gBAAM,WAAN,CAAkB,SAAxC","file":"utils/token.js","sourcesContent":["/**\n * unvalid token\n *\n * Created by Bell on 16/8/12.\n */\n\nimport redis from 'redis';\nimport bluebird from 'bluebird';\nconst client = redis.createClient();\n\nbluebird.promisifyAll(redis.RedisClient.prototype);\n\n/**\n * save token to redis\n *\n * @param token\n */\nexport async function saveToken(token) {\n    await client.setAsync(token, 1);\n}\n\n/**\n * delete token from redis\n *\n * @param token\n */\nexport async function delToken(token) {\n    await client.delAsync(token);\n}\n\n/**\n * whether token is existed in redis\n * \n * @param token\n * @returns {boolean}\n */\nexport async function isTokenExisted(token) {\n    try {\n        const result = await client.getAsync(token);\n        if (result) {\n            return true;\n        } else {\n            return false;\n        }\n    } catch (err) {\n        console.error(err);\n        return false;\n    }\n}\n"],"sourceRoot":"/source/"}